## Introduction
Modern technology has evolved to a point where we can acquire, with advanced microscopes, precise high-resolution images. To process such complex information, we usually resort to very time-consuming manual analysis protocols. Processing the data this way introduces a user bias and a lack of reproducibility, which makes analysis tedious and overall inefficient . Therefore, automation of the analysis and reduction of processing time should become one of the main objectives for the field. 

To overcome those limitations, computational tools like Fiji - a common platform for biological-image analysis used nowadays - have been established in the research community. We have chosen Fiji (Itâ€™s Just Image J) _(Schindelin et al. 2012)_ as our tool for this project because it contains the largest set of plugins available, a great variety of functionalities and allows for the creation of macros to automate some of the processes. The main focus of this project is to create a pipeline to generate a standardised image analysis protocol to compare samples from different experimental setups. 

Here, we propose a set of macros for Fiji which will automatise: the processing of the samples, the analysis of stacks, and the quantification of 3D volumes. With computational approaches like this one, the user bias of the analysis can be significantly reduced. Nonetheless, despite having reduced the human bias resulting from manual processing, there is still a bias that comes from the segmentation process of the stacks itself. More specifically, it is introduced by the user-supervised training of the auto-segmentation algorithm. To reduce this new bias, the pipeline runs through, in our case, four user-trained algorithms which are later averaged and thresholded, to achieve a closer-to-reality segmented sample capable of compensating for this bias. 

With the Digital 3D-Atlas MAKER (DAMAKER), we created a digital 3D processing method, useful for investigating the temporal and morphogenetic changes in the hindbrain of Zebrafish embryos _(Blanc et al. 2022, unpublished)_. We have developed a series of macros in ImageJ Macro language, with which we implemented new functionalities in Fiji as well as automatised some of the preexisting ones to make the image processing more efficient. Moreover, the pipeline is flexible to modifications to fit different experimental batches, organs and/or model organisms. To do so requires little to no coding language knowledge, meaning this tool is suitable for all researchers regardless of their computational skills. We also provide an R code that plots the data obtained in some of the outputs, and a python script to analyse the shape of the 3D models obtained through the pipeline.


![image](https://user-images.githubusercontent.com/102226466/180606064-5ddbed93-e7c0-4d2b-8d63-2dae5153aaf5.png)

**Fig 1. DAMAKER image analysis pipeline diagram. (A) Processing:** Manually select, crop and flip the stacks before registration. Once registered, the Segmentation Macro will process the aligned single-channel stacks and, with an automation of the trained segmentation algorithm, give back a set of user-segmented single-channel stacks. Once you have the segmented single-channel stacks, you can either subtract the signal channel to the reference to obtain contextualised single-channel stacks with the AutoMathOperator Macro or skip that step and directly average and threshold them with the AutoAverage and ConsensusThreshold macros to obtain a binary sample single-channel stack. **(B) Quantification:** From the Binary sample single-channel stacks, and with the Global Quantification Macro, we obtain a data sheet with the quantified volume of the signal each stack displays. From that same stack (Binary sample single-channel) with the AutoAxisDistribution macro, we can reslice it and run a slice-by-slice quantification, obtaining a new set of data sheets detailing the Signal axis Distribution of the samples across the different body axes. **(C) Model generation:** Again, from the Binary single-channel stacks (after Sample Averaging and submitting them to a threshold), we obtain a resulting sheet containing a quality assessment and a model integrable into the atlas. 

In red coloured text, we represent the process or macros; in black coloured text, the items either you or the system will provide; in black squares, the stacks or images; and in white squares, the data sheets.


## In depth description of the pipeline
The description of the individual macros and how to use them is available in the wiki section of this Github page.
